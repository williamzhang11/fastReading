# 第三章-大型网站核心架构要素

本章主要讲述了在架构设计时需要考虑的核心要素。一切的设计都需要进行如下5个方面的考虑：
性能，可用性，伸缩性，扩展性，安全性

软件架构定义：有关软件整体结构和组件的抽象描述，用于指导大型软件系统各方面的设计。

系统架构包括功能模块，非功能模块，他们之间相互关联，构成软件系统架构

上述的5个要素，是架构设计中需要平衡考虑的，也是衡量一个软件架构的优劣。


## 3.1性能

问题：性能差的网站，是用户无法忍受的，会造成用户流失。

方案：
	1.浏览器端，浏览器缓存，使用页面压缩，合理布局页面，减少cookie传输等手段改善
	2.CDN：将网站静态内容分发至离用户最近的网络服务商机房，使用户通过最短路径访问
	3.nginx等反向代理：缓存热点文件，加快请求访问速度，减轻应用服务器负载压力
	4.缓存：应用服务端使用服务器本地缓存，分布式缓存，通过缓存在内存中的热点数据处理用户请求，加快请求处理过程，减轻
	数据库负载压力
	5.异步：用户请求发送到消息队列，等待后续任务处理，当前请求直接返回响应给用户
	6.集群：多台应用服务器组成一个集群共同对外服务，提高整体处理能力，改善性能。
	7.代码：多线程，改善内存管理
	8.数据库：索引，缓存，sql优化，使用nosql
	
衡量性能的指标：
	1.响应时间
	2.TPS
	3.系统性能计数器
用处：1.确定系统设计是否达到目标
	 2. 用于监控进行报警，分析系统瓶颈，预测网站容量,保障系统可用
	 
由于网站需要长时间持续运行，因此还必须考虑保证高并发下的稳定运行。


## 3.2可用性

问题:
	对于大型网站，网站宕机，服务不可用是重大事故。因为服务器硬件是普通的商用服务器，这些服务器的设计目标本身不能
	保证高可用，很可能出现服务器硬件故障，尤其是上万台服务器，每天必然有一些服务器宕机。

网站架构设计前提是必然出现服务器宕机，高可用就是为了在服务器宕机时，服务仍然是可用的。

方案：
	1.冗余:应用部署在多台服务器上同时提高访问。数据存储在多台服务器相互备份。
	
	（1）.应用服务器：应用服务器通过负载均衡设备组成集群，同时对外提高服务，任何一台服务器宕机，自动将请求
	切换到其他服务器，实现高可用。前提是，应用服务器必须是无状态的，如不能保留请求会话信息，否则会话丢失，转到其他
	服务器也无法完成业务处理。
	
	（2）.存储服务器：需要对数据进行实时备份，服务器宕机时，需要将数据访问转移到可用服务器上，并进行数据恢复，保证
	有服务器宕机时数据依然可用。
	
	2.软件开发过程质量保证：
	通过发布验证，自动化测试，自动化发布，灰度发布等手段，减少将故障引入线上环境的可能，避免故障范围扩大。
	
衡量一个系统架构设计是否高可用，假设有一台或几台服务器宕机，系统整体是否可用。

## 3.3伸缩性


	
	
	
	
